YUI.add("aui-form-builder-field-list",function(e,t){var n=e.getClassName("form","builder","field","list"),r=e.getClassName("form","builder","field","list","add","button"),i=e.getClassName("form","builder","field","list","add","button","icon"),s=e.getClassName("form","builder","field","list","add","button","label"),o=e.getClassName("form","builder","field","list","add","button","plus","icon"),u=e.getClassName("form","builder","field","list","add","button","plus","label"),a=e.getClassName("form","builder","field","list","add","button","visible"),f=e.getClassName("form","builder","field","list","add","container"),l=e.getClassName("form","builder","field","list","container"),c=e.getClassName("form","builder","field","list","empty"),h=e.getClassName("form","builder","field","move","target"),p=e.getClassName("form","builder","list","move","target");e.FormBuilderFieldList=e.Base.create("form-builder-field-list",e.Base,[],{TPL_ADD_FIELD:'<div class="'+f+'">'+'<a class="'+r+" "+a+'" href="javascript:;">'+'<div class="'+i+'">'+'<div class="'+o+'">+</div>'+"</div>"+'<label class="'+s+'">'+'<label class="'+u+'">+</label> ADD FIELD'+"</label>"+"</a></div>",TPL_FIELD_LIST:'<div class="'+n+'">'+'<div class="'+l+'"></div>'+"</div>",TPL_FIELD_MOVE_TARGET:'<button type="button" class="'+h+" "+p+' layout-builder-move-target layout-builder-move-col-target btn btn-default">'+"{pasteHere}</button>",initializer:function(){var t=this.get("content");this._uiSetFields(this.get("fields")),t.delegate("click",this._onClickAddField,"."+r,this),t.delegate("mouseenter",this._onMouseEnterAddButton,"."+f,this),t.delegate("mouseleave",this._onMouseLeaveAddButton,"."+f,this),this.after("fieldsChange",e.bind(this._afterFieldsChange,this))},addField:function(t,n){var r=this.get("fields");e.Lang.isNumber(n)?r.splice(n,0,t):r.splice(this._newFieldIndex,0,t),this.set("fields",r)},removeField:function(e){var t=this.get("fields"),n=t.indexOf(e);t.splice(n,1),this.set("fields",t)},_afterFieldsChange:function(){var e=this.get("fields");this._uiSetFields(e),this._updateRemovableLayoutColProperty()},_appendAddFieldNode:function(t,n,r){var i,s;i=e.Node.create(this.TPL_ADD_FIELD),s=e.Node.create(e.Lang.sub(this.TPL_FIELD_MOVE_TARGET,{pasteHere:this.get("strings").pasteHere})),r||i.removeClass(a),s.setData("field-list-index",n),t.append(i),t.append(s)},_onClickAddField:function(e){var t=this.get("content").all("."+r);this._newFieldIndex=t.indexOf(e.currentTarget)},_onMouseEnterAddButton:function(e){var t=e.currentTarget;this.get("fields").length>0&&t.addClass(a)},_onMouseLeaveAddButton:function(e){var t=e.currentTarget;this.get("fields").length>0&&t.removeClass(a)},_uiSetFields:function(e){var t=this.get("content"),n=t.one("."+l),r;n.empty();for(r=0;r<e.length;r++)this._appendAddFieldNode(n,r,!1),n.append(e[r].get("content"));this._appendAddFieldNode(n,r,!0),t.toggleClass(c,!e.length),e.length===0?(t.one("."+f).addClass(a),t.all("."+i).removeClass("hidden"),t.all("."+u).addClass("hidden")):(t.all("."+i).addClass("hidden"),t.all("."+u).removeClass("hidden"))},_updateRemovableLayoutColProperty:function(){var e=this.get("fields"),t=this.get("content"),n=t.ancestor(".col"),r;n&&(r=n.getData("layout-col"),r.set("removable",e.length===0))}},{ATTRS:{content:{validator:function(t){return e.instanceOf(t,e.Node)},valueFn:function(){return e.Node.create(this.TPL_FIELD_LIST)},writeOnce:"initOnly"},fields:{value:[]},strings:{value:{pasteHere:"Paste here"},writeOnce:!0}}})},"3.0.3-deprecated.12",{requires:["aui-form-builder-field-type","aui-form-builder-field-types","aui-form-builder-layout-builder"],skinnable:!0});
